<div class="container">
  <form [formGroup]="parameters">
    <div class="row">
      <div class="col-md-6 form">
        <h3>Option Price Parameters</h3>
        <br>
        <div class="row">
          <div class="col-sm-6">
            <md-radio-group formControlName="type">
              <md-radio-button value="call">Call</md-radio-button>
              <md-radio-button value="put">Put</md-radio-button>
            </md-radio-group>
          </div>
          <div class="col-sm-6">
            <md-radio-group formControlName="position">
              <md-radio-button value="buy">Buy</md-radio-button>
              <md-radio-button value="sell">Sell</md-radio-button>
            </md-radio-group>
          </div>
          <div class="col-sm-6">
            <md-input-container>
              <input mdInput formControlName="price"
                     placeholder="Underlying price">
            </md-input-container>
          </div>
          <div class="col-sm-6">
            <md-input-container>
              <input mdInput formControlName="strike" placeholder="Strike">
            </md-input-container>
          </div>
          <div class="col-sm-6">
            <md-input-container>
              <input mdInput formControlName="daysToExpiration"
                     placeholder="Days To Expiration">
            </md-input-container>
          </div>
          <div class="col-sm-6">
            <md-input-container>
              <input mdInput formControlName="volatility"
                     placeholder="Volatility (% p.a.)">
            </md-input-container>
          </div>
          <div class="col-sm-6">
            <md-input-container>
              <input mdInput formControlName="interestRate"
                     placeholder="Risk-free interest rates (% p.a.)">
            </md-input-container>
          </div>
          <div class="col-sm-6">
            <md-input-container>
              <input mdInput formControlName="dividendYield"
                     placeholder="Dividend yield (% p.a.)">
            </md-input-container>
          </div>
        </div>
        <br>
        <div class="row" *ngIf="chartData">
          <div class="col-md-12 simulation">
            <h3>
              <md-icon mdTooltip="Simulated values override entered option price parameters"
                       mdTooltipPosition="after">
                info_outline
              </md-icon>
              Simulation Controls
              <md-slide-toggle
                mdTooltip="Advanced mode enables additional simulation controls"
                mdTooltipPosition="right"
                color="accent"
                [checked]="showAdvancedSimulationControls"
                (change)="showAdvancedSimulationControls = !showAdvancedSimulationControls">
                Advanced
              </md-slide-toggle>
            </h3>
            <div class="row">
              <div class="col-6">
                <label>
                  {{parameters.getRawValue().daysToExpirationActive}} days to
                  expiration
                </label>
              </div>
              <div class="col-6">
                <md-slider thumbLabel
                           min="0"
                           [max]="parameters.getRawValue().daysToExpiration * 2"
                           step="1"
                           formControlName="daysToExpirationActive"
                           (input)="onSliderUpdate('daysToExpirationActive', $event.value)">
                </md-slider>
              </div>
            </div>
            <div class="row" *ngIf="showAdvancedSimulationControls">
              <div class="col-6">
                <label>
                  Price {{parameters.getRawValue().priceActive}}
                </label>
              </div>
              <div class="col-6">
                <md-slider thumbLabel
                           [min]="parameters.getRawValue().price * 0.9"
                           [max]="parameters.getRawValue().price * 1.1"
                           step="1"
                           formControlName="priceActive"
                           (input)="onSliderUpdate('priceActive', $event.value)">
                </md-slider>
              </div>
            </div>
            <div class="row" *ngIf="showAdvancedSimulationControls">
              <div class="col-6">
                <label>
                  Strike {{parameters.getRawValue().strikeActive}}
                </label>
              </div>
              <div class="col-6">
                <md-slider thumbLabel
                           [min]="parameters.getRawValue().strike * 0.9"
                           [max]="parameters.getRawValue().strike * 1.1"
                           step="1"
                           formControlName="strikeActive"
                           (input)="onSliderUpdate('strikeActive', $event.value)">
                </md-slider>
              </div>
            </div>
            <div class="row" *ngIf="showAdvancedSimulationControls">
              <div class="col-6">
                <label>
                  Volatility {{parameters.getRawValue().volatilityActive}}%
                </label>
              </div>
              <div class="col-6">
                <md-slider thumbLabel
                           min="0"
                           [max]="parameters.getRawValue().volatility * 2"
                           step="1"
                           formControlName="volatilityActive"
                           (input)="onSliderUpdate('volatilityActive', $event.value)">
                </md-slider>
              </div>
            </div>
            <div class="row" *ngIf="showAdvancedSimulationControls">
              <div class="col-6">
                <label>
                  Interest rate {{parameters.getRawValue().interestRateActive}}%
                </label>
              </div>
              <div class="col-6">
                <md-slider thumbLabel
                           min="0"
                           [max]="Math.max(parameters.getRawValue().interestRate * 4, 10)"
                           step="1"
                           formControlName="interestRateActive"
                           (input)="onSliderUpdate('interestRateActive', $event.value)">
                </md-slider>
              </div>
            </div>
            <div class="row" *ngIf="showAdvancedSimulationControls">
              <div class="col-6">
                <label>
                  Dividend yield {{parameters.getRawValue().dividendYieldActive}}%
                </label>
              </div>
              <div class="col-6">
                <md-slider thumbLabel
                           min="0"
                           [max]="Math.max(parameters.getRawValue().dividendYield * 4, 10)"
                           step="1"
                           formControlName="dividendYieldActive"
                           (input)="onSliderUpdate('dividendYieldActive', $event.value)">
                </md-slider>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-6 chart-holder">
        <div style="display: inline">
          <button md-button (click)="onZoomClick(-zoomChangeStep)">
            <md-icon>zoom_in</md-icon>
          </button>
          <button md-button (click)="onZoomClick(zoomChangeStep)">
            <md-icon>zoom_out</md-icon>
          </button>
          <h3>Option Price Chart</h3>
        </div>
        <div class="chart">
          <ngx-charts-line-chart
            *ngIf="chartData"
            [results]="chartData"
            [scheme]="scheme"
            showSeriesOnHover="false"
            rangeFillOpacity="0"
            gradient="false"
            xAxis="true"
            yAxis="true"
            showXAxisLabel="true"
            showYAxisLabel="true"
            xAxisLabel="Underlying price"
            yAxisLabel="Payoff"
            autoScale="autoScale"
            roundDomains="true">
          </ngx-charts-line-chart>
        </div>
      </div>
    </div>
  </form>
</div>
